<html>
	<head>
	 	<!-- Fonts and icons -->
  		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
  		<!-- CSS Files -->
		<link href="static/css/material-dashboard.min.css" rel="stylesheet" />-->

	</head>


	<!-- BODY -->
	<body class="dark-edition">
		
		<div class="content">
        	<div class="container-fluid">
			
			<!-- CONTENT -->
           		<div class="fuzzer-box">
				<div class="card">
				{% include 'tabs.html' %}
				{% include 'contents.html' %}
				</div>
      			</div>

		</div>
		</div>

	</body>


</html>

<!-- JS Scripts -->
<script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="static/js/popper.min.js"></script>
<script src="static/js/bootstrap-material-design.min.js"></script>

<!-- Styling -->
<style>
.fuzzer-box {
    height: 400px;
    width: 800px;
    position: fixed;
    top: 50%;
    left: 50%;
    margin-top: -250px;
    margin-left: -400px;
}
</style>

<!-- Main live UI handlers -->
<script type="text/javascript" charset="utf-8">
    connected = false;
    fuzzing = false;

    var socket = io();
    socket.on('connect', function() {
	connected = true;
    });



    // Sends fuzzing options to server
    $("#run_fuzzer").click(function() {
    	if (connected) {

		if (!fuzzing) {
			socket.emit('start_fuzzing',
				{
					binary: $.trim($('#binary-name').text()),
					afl_cores: parseInt($.trim($('#afl-cores').text())),
					no_dictionary: !($('#create-dictionary').is(':checked')),
					first_crash: ($('#first-crash').is(':checked'))
				}
			);
			fuzzing = true;
			$(this).text("Stop fuzzer");
			$(this).removeClass('btn-primary').addClass('btn-danger');

		} else {
			socket.emit('stop_fuzzing',{});
			fuzzing = false;
			$(this).text("Run fuzzer");
			$(this).removeClass('btn-danger').addClass('btn-primary');
		}
	
	}
    });


    $(function(){
	    $(".dropdown-box .dropdownitem").click(function(){
	     $(this).parent().parent().find("button").text($(this).text());
	    });
    });
</script>
